<!DOCTYPE html>
<html>
<head>
<style>    
    #customers {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; border-collapse: collapse; width: 100%;
    }#customers td, #customers th {
    border: 1px solid #ddd;
    padding: 8px;
    }#customers tr:nth-child(even){background-color: #f2f2f2;}
    #customers tr:hover {background-color: #ddd;}
    #customers th {
    padding-top: 12px; padding-bottom: 12px; text-align: left; background-color: #4CAF50; color: white;
    }
</style>
   <!-- Custom fonts for this template-->
   <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    
   <!-- Page level plugin CSS-->
    <link href="vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">
 
   <!-- Custom styles for this template-->
   <link href="css/sb-admin.css" rel="stylesheet">
</head>

<body id="page-top">
    
  <!-- navbar -->
    <nav class="navbar navbar-expand navbar-dark bg-dark static-top">
      <a class="navbar-brand mr-1" href="login.html">SSRCP </a>
      <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
        <i class="fas fa-bars"></i>
      </button>
      <!-- //Navbar Search -->
      <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
        <ul class="navbar-nav ml-auto ml-md-0">
          <li class="nav-item dropdown no-arrow">
            <button type="button" class="btn btn-info btn-lg, btn pull-right" data-toggle="modal"
              data-target="#productionLog">Production Log</button>
          </li>
          <li class="nav-item dropdown no-arrow">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
              <i class="fas fa-user-circle fa-fw"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
              <a class="dropdown-item" href="#">Settings</a>
              <a class="dropdown-item" href="#">Activity Log</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Logout</a>
            </div>
          </li>
        </ul>
      </form>
    </nav>
    <!-- //Sidebar -->
   <div id="wrapper"> 
            <ul class="sidebar navbar-nav">
              <li class="nav-item ">
                <a class="nav-link" href="/home">
                  <i class="fas fa-fw fa-tachometer-alt"></i>
                  <span>Dashboard</span>
                </a>
              </li>          
              
              <li class="nav-item ">
                <a class="nav-link" href="/models">
                    <i class="fa fa-list-alt" aria-hidden="true"></i>
                  <span>Tile Models</span>
                </a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="/productionLog">
                    <i class="fa fa-list-alt" aria-hidden="true"></i>
                  <span>ProductionLog</span></a>
              </li> 
                <li class="nav-item ">
                <a class="nav-link" href="/contact">
                  <i class="fas fa-fw fa-table"></i>
                  <span>Enquiries</span></a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/sales">
                  <i class="fas fa-fw fa-table"></i>
                  <span>Sales</span></a>
              </li> 
          </ul>
                <!--// container-fluid-->
        <div id="content-wrapper"> 
            <div class="container-fluid">  
              <!-- DataTables Example -->
            <div class="row">    
              <div class="card-body">
                  <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
                    <ul class="navbar-nav ml-auto ml-md-0">
                        <li class="nav-item dropdown no-arrow"></li>   
                    </ul>
                  </form>
                <div class="table-responsive">
                  <table class="table table-bordered" id="dataTable" width="100% " length="100%" cellspacing="0">
                    <thead>
                      <tr>
                        <th>Id</th>
                        <th>TileModelId</th>
                        <th>Quantity</th>
                        <th>Comments</th>
                        <th>DateCreated</th>
                        <th>CreatedBy</th> 
                        <th>Availability</th>
                      </tr>
                    </thead> 
                  </table>
                </div>
              </div>
            </div>

            <footer class="sticky-footer" style="height: 12%; position: absolute ;">
              <div class="container my-auto">
                <div class="copyright text-center my-auto">
                  <span> Your's SSRCP 2020</span>
                </div>
              </div>
            </footer>
      </div>
    </div>
  </div>
    <!--  Production Log  details -->
<div class="modal fade" id="productionLog" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">            
            <h5 class="modal-title" id="exampleModalLabel">Add Production</h5>
            <button type="button" class="close" data-dismiss="modal">&times;</button>
          </div>
          <div class="hidden-div">
          <div class="modal-body">
              <h6>Choose Material</h6>
          </div>
          </div>
          <div class="modal-body">      
            <div class="dropdown">
                 <select class="form-control" id="tileModels" > 
               </select>
             </div>
          </div>
          <div class="modal-body">
             <div class="form-group">
                <label for="comments"><h6>Comments</h6></label>
                <textarea class="form-control" rows="3" id="comments" ></textarea>
                <div class="hidden-div"></div>
             </div>
         </div>
         <div class="form-group">
          <div class="modal-body">
            <label for="quantity"><h6>Quantity</h6></label>
            <textarea class="form-control" rows="3" id="qtty" ></textarea>
                <span class="only-numeric" class type="text"id="qtty" style="color:green; display: none">Input digits (0 - 9)</span>
              </div>
              <div class="form-group">
                <div class="modal-body">
                  <label for="dateCreated"><h6>DateCreated</h6></label>
                  <textarea class="form-control" rows="1" id="date"></textarea>
                <div class="modal-footer">
                  <div class="form-group">
                    <div class="modal-body">
                      <label for="createdBy"><h6>CreatedBy</h6></label>
                      <textarea class="form-control" rows="1" id="createdBy"></textarea>
                    <div class="modal-footer">
                     <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button> 
                    <input type="Submit" id="sendData" onclick="addProductionLog()" class="btn btn-success" data-dismiss="modal" value="Submit">
                </div>                
             </div>
            </div>
           </div>
          </div>
         </div> 
    </div>
        <!-- Custom fonts for this template-->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <!-- Page level plugin CSS-->
    <link href="vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/sb-admin.css" rel="stylesheet">

        
  
    <!--// Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!--// Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!--// Page level plugin JavaScript-->
    <script src="vendor/datatables/jquery.dataTables.js"></script>
    <script src="vendor/datatables/dataTables.bootstrap4.js"></script>

    <!--// Custom scripts for all pages-->
    <script src="js/sb-admin.min.js"></script>

    <!--// Demo scripts for this page-->
    <script src="js/demo/datatables-demo.js"></script>
    <script src="js/productionLog.js"></script>
    <script src="../js/underscore-min.js"></script>
    <script src="../js/reqHandler.js"></script>
    <script src="../js/services.js"></script>
    <!--// bootstrap script -->
    <script>
        $(document).ready(function () {
          console.log("test list &&&&");
          $(".only-numeric").bind("keypress", function (e) {
            var keyCode = e.which ? e.which : e.keyCode
            if (!(keyCode >= 48 && keyCode <= 57)) {
              $(".error").css("display", "inline");
              return false;
            } else {
              $(".error").css("display", "none");
            }
          });
        });
       // addProduction
        function addProduction() {
          var productionObj = {
            "productionLogId": $("id").val(),
            "tileModelId": $("#textarea").val(),
            "quantity": $("#qtty").val(),
            "comments": $("#comments").val(),
            "dropdown": $("#ok").val(),
            "dateCreated": $("#date").val(),
            "createdBy": $("#createdBy").val()
          };
        }
       // getProductionLogList
        function getProductionLogList() {
          console.log("test list checkinggggg");
          $.get({ url: '/productionLogs' }, function (resp) {
            console.log("check :: productionLogRecords", resp.result);
            if (resp.status == 'Success') {
              loadProductionLogGrid(resp.result);
            } else {
              alert(resp.status);
            }
          });
        }
       // getProductionLogList
        getProductionLogList();
        var formattedProductionLogObj = [];
        function loadProductionLogGrid(result) {
          console.log("loadProductionLogGrid ::: function enter", result);
          var formattedproductionLog = [];
          result.forEach(obj => {
            var tempProductionLogObj = [];
             tempProductionLogObl.push(obj.productionLogId);
            tempProductionLogObl.push(obj.tileModelId);
            tempProductionLogObj.push(obj.comments);
            tempProductionLogObj.push(obj.quantity);
            tempProductionLogObj.push(obj.dateCreated);
            tempProductionLogObj.push(obj.createdBy);
            formattedProductionLogObj.push(tempProductionLogObj);
          });

          console.log("restult checking", formattedProductionLogObj);
          $('#dataTable').DataTable({
            data: formattedProductionLogObj,
            columns: [
            { title: "Id" },
           { title: "TileModelId" },
             { title: "Quantity" },
              { title: "Comments" },
             { title: "DateCreated" },
             { title: "CreatedBy" },
               { title: "Availability" }           
            ],
            bDestroy: true
          });
        }
     </script>
   </body>
</html>