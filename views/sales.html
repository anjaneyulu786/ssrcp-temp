<!DOCTYPE html>
<html>
<head>
<style>    
    #customers {
    font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; border-collapse: collapse; width: 100%;
    }#customers td, #customers th {
    border: 1px solid #ddd;
    padding: 8px;
    }#customers tr:nth-child(even){background-color: #f2f2f2;}
    #customers tr:hover {background-color: #ddd;}
    #customers th {
    padding-top: 12px; padding-bottom: 12px; text-align: left; background-color: #4CAF50; color: white;
    }
</style>
   <!-- Custom fonts for this template-->
   <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    
   <!-- Page level plugin CSS-->
    <link href="vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">
 
   <!-- Custom styles for this template-->
   <link href="css/sb-admin.css" rel="stylesheet">
</head>

<body id="page-top">
  <!-- navbar -->
    <nav class="navbar navbar-expand navbar-dark bg-dark static-top">
      <a class="navbar-brand mr-1" href="login.html">SSRCP </a>
      <button class="btn btn-link btn-sm text-white order-1 order-sm-0" id="sidebarToggle" href="#">
        <i class="fas fa-bars"></i>
      </button>
      <!-- //Navbar Search -->
      <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
        <ul class="navbar-nav ml-auto ml-md-0">
          <li class="nav-item dropdown no-arrow">
            <button type="button" class="btn btn-info btn-lg, btn pull-right" data-toggle="modal"
              data-target="#sales">Sales<i class="fa fa-shopping-cart"></i></button>
          </li>
          <li class="nav-item dropdown no-arrow">
            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-toggle="dropdown"
              aria-haspopup="true" aria-expanded="false">
             <i class="fas fa-user-circle fa-fw"></i>
            </a>
            <div class="dropdown-menu dropdown-menu-right" aria-labelledby="userDropdown">
              <a class="dropdown-item" href="#">Settings</a>
              <a class="dropdown-item" href="#">Activity Log</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="#">Logout</a>
            </div>
          </li>
        </ul>
      </form>
    </nav>
    <!-- //Sidebar -->
   <div id="wrapper"> 
            <ul class="sidebar navbar-nav">
              <li class="nav-item ">
                <a class="nav-link" href="/home">
                  <i class="fas fa-fw fa-tachometer-alt"></i>
                  <span>Dashboard</span>
                </a>
              </li>                       
              <li class="nav-item ">
                <a class="nav-link" href="/models">
                    <i class="fa fa-list-alt" aria-hidden="true"></i>
                  <span>Tile Models</span>
                </a>
              </li>
              <li class="nav-item ">
                <a class="nav-link" href="/productionLog">
                    <i class="fa fa-list-alt" aria-hidden="true"></i>
                  <span>ProductionLog</span></a>
              </li> 
                <li class="nav-item ">
                <a class="nav-link" href="/enquiries">
                  <i class="fas fa-fw fa-table"></i>
                  <span>Enquiries</span></a>
              </li>
              <li class="nav-item active">
                <a class="nav-link" href="/sales">
                  <i class="fas fa-fw fa-table"></i>
                  <span>Sales</span></a>
              </li> 
          </ul>
                <!--// container-fluid-->
        <div id="content-wrapper"> 
            <div class="container-fluid">  
              <!-- DataTables Example -->
            <div class="row">    
              <div class="card-body">
                  <form class="d-none d-md-inline-block form-inline ml-auto mr-0 mr-md-3 my-2 my-md-0">
                    <ul class="navbar-nav ml-auto ml-md-0">
                        <li class="nav-item dropdown no-arrow"></li>   
                    </ul>
                  </form>
                <div class="table-responsive">
                  <table class="table table-bordered" id="dataTable" width="100% " length="100%" cellspacing="0">
                    <thead>
                      <tr>
                        <!-- <th>SalesLog Id</th> -->
                        <th>Items</th>
                        <th>TotalQuantity</th>
                        <th>Comments</th>
                        <th>Custmor Name</th>
                        <th>Custmor Number</th>
                        <th>DateCreated</th>
                        <th>CreatedBy </th>
                        <th>UpdatedBy </th>
                      </tr>
                    </thead> 
                  </table>
                </div>
              </div>
            </div>
            <footer class="sticky-footer" style="height: 12%; position: absolute ;">
              <div class="container my-auto">
                <div class="copyright text-center my-auto">
                  <span> Your's SSRCP 2020</span>
                </div>
              </div>
            </footer>
      </div>
    </div>
  </div>
  <!-- sales  details -->
      <a class="scroll-to-top rounded" href="#page-top"> 
       <i class="fas fa-angle-up"></i>     
     </a>   
    <div class="modal fade" id="sales" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
         <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Add Sales</h5>
          <button class="close" type="button" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">Ã—</span>
          </button>
         </div>
          <div class="modal-body">
            <h6>Choose Tile & Models</h6>
          </div>
            <!-- <div class="modal-body">
              <input type="textarea" id="salesLogId" class="form-control" placeholder="SalesLog Id" autofocus="autofocus">
            </div> -->
              <div class="modal-body">
                <input type="textarea" id="items" class="form-control" placeholder="Items" autofocus="autofocus">
              </div>
            <!-- <div class="modal-body">
              <div class="dropdown" id="tileSize">
                <select class="form-control" id="sales">
                  <option value="Small">Small tile: 12 x 12</option>
                  <option value="Standard">Standard tiles 20 x 20 cm</option>
                  <option value="Medium">Medium tile: 23,5 cm x 23,5 cm</option>
                  <option value="Large">Large tile: 29,5 cm x 29,5 cm</option>
                  <option value="Extra"></option>Extra large: 42 x 42 cm</option>
                </select>
              </div>
            </div> -->
              <div class="modal-body">
                <input type="text" id="totalQuantity" class="form-control" placeholder="Total Quantity" autofocus="autofocus">
                <span class="error" style="color:green; display: none">Enter valid text</span>
            </div>
              <div class="modal-body">
                  <input type="text" id="comments" class="form-control" placeholder="Comments" autofocus="autofocus">
                  <span id="errorTextarea" style="display: none; color:green; font-size:12px"><b>enter valid details</b></span>
               
            </div>
     
              <div class="modal-body">
                <input type="text" id="custmorName" class="form-control" placeholder="Custmor Name" autofocus="autofocus">
                <span id="errorTextarea" style="display: none; color:green; font-size:12px"><b>enter valid details</b></span>
              </div>
           
           
               <div class="modal-body">
                 <input type="text" id="custmorNumber" class="form-control" placeholder="Custmor Number" autofocus="autofocus">
                 <span id="errorTextarea" style="display: none; color:green; font-size:12px"><b>enter valid details</b></span>
               
             </div>
              <div class="modal-body">
                <input type="text" id="dateCreatedBy" class="form-control" placeholder="DateCreated By" autofocus="autofocus">
                <span id="errorTextarea" style="display: none; color:green; font-size:12px"><b>enter valid details</b></span>
            </div>
               <div class="modal-body">
                 <input type="text" id="createdBy" class="form-control" placeholder="CreatedBy" autofocus="autofocus">
                 <span id="errorTextarea" style="display: none; color:green; font-size:12px"><b>enter valid details</b></span>
               </div>
              <div class="modal-body">
                  <input type="text" id="updatedBy" class="form-control" placeholder="UpdatedBy" autofocus="autofocus">
                  <span id="errorTextarea" style="display: none; color:green; font-size:12px"><b>enter valid details</b></span>
            </div>
            <div class="modal-footer">
               <input type="Cancel" class="btn btn-primary" value="Cancel"> 
              <!-- <input type="Submit" id="sendData" onclick="cancel()" class="btn btn-info" data-dismiss="modal" value="Cancel"> -->
              
              <input type="Submit" id="sendData" onclick="addSales()" class="btn btn-success" data-dismiss="modal"
                value="Submit">
                
            </div>
          </div>
        </div>
      </div>
          <body id="page-top">
            <div class="container">
              <div id="successMess" style="display: none" time="10sec">
                <div class="alert alert-success">
                  <p><strong>Success!</strong> Submited Successfully.</p>
                </div>
              </div>
           </div> 
        </button>
        <!-- Custom fonts for this template-->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

    <!-- Page level plugin CSS-->
    <link href="vendor/datatables/dataTables.bootstrap4.css" rel="stylesheet">

    <!-- Custom styles for this template-->
    <link href="css/sb-admin.css" rel="stylesheet">

    <!--// Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!--// Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!--// Page level plugin JavaScript-->
    <script src="vendor/datatables/jquery.dataTables.js"></script>
    <script src="vendor/datatables/dataTables.bootstrap4.js"></script>

    <!--// Custom scripts for all pages-->
    <script src="js/sb-admin.min.js"></script>

    <!--// Demo scripts for this page-->
    <script src="js/demo/datatables-demo.js"></script>

    <!-- <script src="js/sales.js"></script> -->
    <script src="../js/underscore-min.js"></script>
    <script src="../js/reqHandler.js"></script>
    <script src="../js/services.js"></script>

    <!--// bootstrap script -->
    <script>
        $(document).ready(function () {
          $(".only-numeric").bind("keypress", function (e) {
            console.log("Sales list checking######");
            var keyCode = e.which ? e.which : e.keyCode
            if (!(keyCode >= 48 && keyCode <= 57)) {
              $(".error").css("display", "inline");
              return false;
            } else {
              $(".error").css("display", "none");
            }
          });
        });
       // addSales
        function addSales() {
          var salesObj = {
            // "SalesLog Id": $("salesLogId").val(),
            "Items": $("#items").val(),
            "Total Quantity": $("#totalQuantity").val(),
            "Comments": $("#comments").val(),
            "Custmor Name": $("#custmorName").val(),
            "Custmor Number": $("#custmorNumber").val(),
            "Date Created": $("#dateCreated").val(),
            "CreatedBy": $("#createdBy").val(),
            "UpdatedBy": $("#updatedBy").val(),
          };
          const reqHandler = new ReqHandler();
          reqHandler.post({url:"/sales", data:user}, function(resp){
	   if(resp.status == "Success" ){
	   alert('sucess')
	   } else{
	       alert("error");
	    }
	});

        }
        // addSales list
        // function addSales() {
        //   var salesObj = {
        //     "custmerName": $("#custmerName").val(),
        //     "date": $("#date").val()
        //   };
        //   if ($("#textarea").val() === "") {
        //     $("#errorTextarea").show();
        //     alert("PLEASE ENTER VALID DATA");
        //     return false;
        //   }
        //   else {
        //      alert(" valid data");
        //   }
        //  $("#successMess").show();
        // $("#successMess").hide(3000);
        //   console.log(salesObj);
        // }
       // getSales List
        function getsalesList() {
          console.log("test list checkinggggg");
          $.get({ url: '/sales' }, function (resp) {
            console.log("check :: Records", resp);
            if (resp.status == 'Success') {
              loadSalesGrid(resp.result);
            } else {
              // alert("sucess");
            }
          });           
        } 
       // getSalesLogList
        getsalesList();
        var formattedSalesObj = [];
        function loadSalesGrid(result) {
          console.log('slesGrid checking');
          console.log("loadSalesGrid ::: function enter", result);
          var formattedSalesObj= [];
          result.forEach(obj => {
            var tempSalesObj = [];
            // Sales.push(obj.salesLogId);
            tempSalesObj.push(obj.items);
            tempSalesObj.push(obj.totalQuantity);
            tempSalesObj.push(obj.comments);
            tempSalesObj.push(obj.customerName);
            tempSalesObj.push(obj.customerNumber);
            tempSalesObj.push(obj.dateCreated);
            tempSalesObj.push(obj.createdBy);
            tempSalesObj.push(obj.dateUpdated);
            tempSalesObj.push(obj.updatedBy);
            formattedSalesObj.push(tempSalesObj);
          });
          console.log("restult checking", formattedsalesObj);
          $('#dataTable').DataTable({
            data: formattedSalesObj,
            columns: [
            // { title: "saleslogId" },
            { title: "items" },
            { title: "totalQuantity" },
             { title: "comments" },
             { title: "customerName" },
             { title: "customerNumber" },
             { title: "dateCreated" },
             { title: "createdBy" },
             { title: "dateUpdated" },
             { title: "updatedBy" },
            ],
            bDestroy: true
          });
        }
     </script>
   </body>
</html>